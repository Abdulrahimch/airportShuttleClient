{"ast":null,"code":"var _jsxFileName = \"/home/cisco/airport-shuttle-v2/airportShuttleV2/client/src/pages/ClientReservations/ListReservations.tsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport useStyles from './useStyles';\nimport { format } from 'date-fns';\nimport { Box } from '@material-ui/core';\nimport DataTable from '../../components/DataTable/DataTable';\nimport { clientReservationsDictionary } from '../../utils/dictionary';\nimport { engColumn } from '../../utils/dictionary';\nimport { getReservations } from '../../helpers/APICalls/reservation';\nimport { deleteReservation } from '../../helpers/APICalls/reservation';\nimport { useSnackBar } from '../../context/useSnackbarContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  turksihColumns\n} = clientReservationsDictionary;\nlet lan = 'eng';\n\nfunction ListReservations() {\n  _s();\n\n  const classes = useStyles();\n  const [rows, setRows] = useState([]);\n  const {\n    updateSnackBarMessage\n  } = useSnackBar();\n\n  const handleCacelClick = cellValues => {\n    const id = cellValues.row._id;\n    deleteReservation(id).then(data => {\n      if (data.error) {\n        updateSnackBarMessage(data.error.message);\n      } else if (data.success) {\n        updateSnackBarMessage('reservation cenceled!');\n        setRows(rows.filter(row => row.id !== cellValues.id));\n      } else {\n        updateSnackBarMessage('An unexpected error occurred. Please try again !');\n      }\n    });\n  };\n\n  console.log('rows are: ', rows);\n\n  const handleEditClick = () => {\n    console.log('Updating your reservation');\n  };\n\n  const columns = engColumn(handleEditClick, handleCacelClick);\n  useEffect(() => {\n    getReservations().then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else if (data.success) {\n        data.success.rows.map((row, idx) => {\n          row.id = idx + 1;\n          let date = new Date(row.selectedDate);\n          date.setTime(date.getTime() - row.timezone / 60);\n          console.log(date);\n          row.date = format(date, \"dd-MM-yyyy\");\n        });\n        setRows(data.success.rows);\n      } else {\n        console.log('Externam error');\n      }\n    });\n    return () => {\n      setRows([]);\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Box, {\n    className: classes.root,\n    children: /*#__PURE__*/_jsxDEV(DataTable, {\n      rows: rows,\n      columns: lan === 'tr' ? turksihColumns : columns\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 9\n  }, this);\n}\n\n_s(ListReservations, \"OELOywNXQmj95EU5LiqHceODFg4=\", false, function () {\n  return [useStyles, useSnackBar];\n});\n\n_c = ListReservations;\nexport default ListReservations;\n\nvar _c;\n\n$RefreshReg$(_c, \"ListReservations\");","map":{"version":3,"sources":["/home/cisco/airport-shuttle-v2/airportShuttleV2/client/src/pages/ClientReservations/ListReservations.tsx"],"names":["useEffect","useState","useStyles","format","Box","DataTable","clientReservationsDictionary","engColumn","getReservations","deleteReservation","useSnackBar","turksihColumns","lan","ListReservations","classes","rows","setRows","updateSnackBarMessage","handleCacelClick","cellValues","id","row","_id","then","data","error","message","success","filter","console","log","handleEditClick","columns","map","idx","date","Date","selectedDate","setTime","getTime","timezone","root"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react';\nimport useStyles from './useStyles';\nimport { format, addHours } from 'date-fns';\nimport { Box, Button } from '@material-ui/core';\nimport DataTable from '../../components/DataTable/DataTable';\nimport { clientReservationsDictionary } from '../../utils/dictionary';\nimport { engColumn } from '../../utils/dictionary';\nimport { getReservations } from '../../helpers/APICalls/reservation';\nimport { GetReservationApiData } from '../../interface/Reservation';\nimport { GridColumns } from '@material-ui/data-grid';\nimport { deleteReservation } from '../../helpers/APICalls/reservation';\nimport { useSnackBar } from '../../context/useSnackbarContext';\nconst { turksihColumns } = clientReservationsDictionary;\n\n\nlet lan = 'eng';\n\nfunction ListReservations(): JSX.Element{\n    const classes = useStyles();\n    const [rows, setRows] = useState<any>([]);\n    const { updateSnackBarMessage } = useSnackBar();\n\n    const handleCacelClick = (cellValues: any) => {\n        const id = cellValues.row._id;\n        deleteReservation(id).then((data) => {\n            if (data.error) {\n                updateSnackBarMessage(data.error.message);\n            } else if (data.success) {\n                updateSnackBarMessage('reservation cenceled!');\n                setRows(rows.filter((row: any) => row.id !== cellValues.id));\n            } else {\n                updateSnackBarMessage('An unexpected error occurred. Please try again !');\n            }\n        })\n        \n    };\n    console.log('rows are: ', rows)\n    const handleEditClick = () => {\n        console.log('Updating your reservation')\n    }\n\n    const columns = engColumn(handleEditClick, handleCacelClick);\n    useEffect(() => {\n        getReservations().then((data) => {\n            if (data.error){\n                console.log(data.error)\n            } else if (data.success) {\n                data.success.rows.map((row, idx) => {\n                    row.id = idx + 1;\n                    let date = new Date(row.selectedDate)\n                    date.setTime(date.getTime() - (row.timezone/60));\n                    console.log(date)\n                    row.date = format(date, \"dd-MM-yyyy\")\n                })\n                setRows(data.success.rows);\n            } else {\n                console.log('Externam error')\n            }\n        })\n        return () => {\n            setRows([]);\n        }\n    }, []);\n\n    return (\n        <Box className={classes.root}>\n            <DataTable rows={rows} columns={lan === 'tr' ? turksihColumns : columns} />\n        </Box>\n    )\n}\n\nexport default ListReservations;"]},"metadata":{},"sourceType":"module"}