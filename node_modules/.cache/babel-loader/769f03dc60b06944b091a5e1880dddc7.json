{"ast":null,"code":"var _jsxFileName = \"/home/cisco/airport-shuttle-v2/airportShuttleV2/client/src/pages/Agency/Reservation/ListAgencyReservations.tsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { format } from 'date-fns';\nimport DataTable from '../../../components/DataTable/DataTable';\nimport { Box } from \"@material-ui/core\";\nimport { agencyTurksihColumns, agencyEngColumns } from '../../../utils/dictionary';\nimport { getReservations, deleteReservation, updateReservation } from '../../../helpers/APICalls/agencyReservation';\nimport { useLanguage } from '../../../context/useLanguageContext';\nimport { useSnackBar } from '../../../context/useSnackbarContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction ListAgencyReservations() {\n  _s();\n\n  const {\n    language\n  } = useLanguage();\n  const {\n    updateSnackBarMessage\n  } = useSnackBar();\n  const [rows, setRows] = useState([]);\n\n  const handleProcessedClick = cellValues => {\n    const id = cellValues.row._id;\n    const inputs = {\n      status: 'processed'\n    };\n    updateReservation(inputs, id).then(data => {\n      if (data.error) {\n        updateSnackBarMessage(data.error.message);\n      } else if (data.success) {\n        updateSnackBarMessage('reservation has been processed successfully!');\n        setRows(rows.filter(row => row.id !== cellValues.id));\n      } else {\n        updateSnackBarMessage('An unexpected error occurred. Please try again !');\n      }\n    });\n  };\n\n  const handleCacelClick = cellValues => {\n    const id = cellValues.row._id;\n    deleteReservation(id).then(data => {\n      if (data.error) {\n        updateSnackBarMessage(data.error.message);\n      } else if (data.success) {\n        updateSnackBarMessage('reservation deleted!');\n        setRows(rows.filter(row => row.id !== cellValues.id));\n      } else {\n        updateSnackBarMessage('An unexpected error occurred. Please try again !');\n      }\n    });\n  };\n\n  console.log('rows are: ', rows);\n  useEffect(() => {\n    getReservations().then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else if (data.success) {\n        data.success.reservations.map((reservation, idx) => {\n          reservation.id = idx + 1;\n          const date = new Date(reservation.selectedDate);\n          reservation.date = format(date, \"dd-MM-yyyy kk:mm\");\n          reservation.property = reservation.client.property;\n        });\n        setRows(data.success.reservations);\n      } else {\n        console.log('External error');\n      }\n    });\n  }, []);\n  const columns = language === 'eng' ? agencyEngColumns(handleProcessedClick, handleCacelClick) : agencyTurksihColumns(handleProcessedClick, handleCacelClick);\n  return /*#__PURE__*/_jsxDEV(Box, {\n    children: /*#__PURE__*/_jsxDEV(DataTable, {\n      rows: rows,\n      columns: columns\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 9\n  }, this);\n}\n\n_s(ListAgencyReservations, \"7quPn2CdHZveWToVE7JzuCQJj+4=\", false, function () {\n  return [useLanguage, useSnackBar];\n});\n\n_c = ListAgencyReservations;\n;\nexport default ListAgencyReservations;\n\nvar _c;\n\n$RefreshReg$(_c, \"ListAgencyReservations\");","map":{"version":3,"sources":["/home/cisco/airport-shuttle-v2/airportShuttleV2/client/src/pages/Agency/Reservation/ListAgencyReservations.tsx"],"names":["useEffect","useState","format","DataTable","Box","agencyTurksihColumns","agencyEngColumns","getReservations","deleteReservation","updateReservation","useLanguage","useSnackBar","ListAgencyReservations","language","updateSnackBarMessage","rows","setRows","handleProcessedClick","cellValues","id","row","_id","inputs","status","then","data","error","message","success","filter","handleCacelClick","console","log","reservations","map","reservation","idx","date","Date","selectedDate","property","client","columns"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { format } from 'date-fns';\nimport useStyles from \"./useStyles\";\nimport DataTable from '../../../components/DataTable/DataTable';\nimport { Box } from \"@material-ui/core\";\nimport { agencyTurksihColumns, agencyEngColumns } from '../../../utils/dictionary';\nimport { getReservations, deleteReservation, updateReservation } from '../../../helpers/APICalls/agencyReservation';\nimport { useLanguage } from '../../../context/useLanguageContext';\nimport { useSnackBar } from '../../../context/useSnackbarContext';\n\nfunction ListAgencyReservations(): JSX.Element {\n    const { language } = useLanguage();\n    const { updateSnackBarMessage } = useSnackBar();\n    const [rows, setRows] = useState<any>([]);\n\n    const handleProcessedClick = (cellValues: any) => {\n        const id = cellValues.row._id;\n        const inputs = { status: 'processed' }\n        updateReservation(inputs, id).then((data) => {\n            if (data.error) {\n                updateSnackBarMessage(data.error.message);\n            } else if (data.success) {\n                updateSnackBarMessage('reservation has been processed successfully!');\n                setRows(rows.filter((row: any) => row.id !== cellValues.id));\n            } else {\n                updateSnackBarMessage('An unexpected error occurred. Please try again !');\n            }\n        })\n    }\n\n    const handleCacelClick = (cellValues: any) => {\n        const id = cellValues.row._id;\n        deleteReservation(id).then((data) => {\n            if (data.error) {\n                updateSnackBarMessage(data.error.message);\n            } else if (data.success) {\n                updateSnackBarMessage('reservation deleted!');\n                setRows(rows.filter((row: any) => row.id !== cellValues.id));\n            } else {\n                updateSnackBarMessage('An unexpected error occurred. Please try again !');\n            }\n        })\n        \n    };\n    console.log('rows are: ', rows)\n    useEffect(() => {\n        getReservations().then((data) => {\n            if (data.error){\n                console.log(data.error);\n            } else if (data.success) {\n                data.success.reservations.map((reservation, idx) => {\n                    reservation.id = idx + 1;\n                    const date = new Date(reservation.selectedDate)\n                    reservation.date = format(date, \"dd-MM-yyyy kk:mm\")\n                    reservation.property = reservation.client.property\n                });\n                setRows(data.success.reservations);\n            } else {\n                console.log('External error')\n            }\n\n        })\n    }, [])\n\n    const columns = language === 'eng' ? agencyEngColumns(handleProcessedClick, handleCacelClick) : agencyTurksihColumns(handleProcessedClick, handleCacelClick);\n\n    return (\n        <Box>\n            <DataTable rows={rows} columns={columns} />\n        </Box>\n    )\n};\n\nexport default ListAgencyReservations;"]},"metadata":{},"sourceType":"module"}