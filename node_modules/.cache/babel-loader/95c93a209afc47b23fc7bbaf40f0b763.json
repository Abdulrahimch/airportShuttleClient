{"ast":null,"code":"var _jsxFileName = \"/home/cisco/airport-shuttle-v2/airportShuttleV2/client/src/pages/Agency/Payments/ListPayments/ListPayments.tsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport DataTable from \"../../../../components/DataTable/DataTable\";\nimport { agencyListPaymentEngColumns } from '../../../../utils/dictionary';\nimport { getPayments, cancelPayment } from '../../../../helpers/APICalls/agencyPayment';\nimport { format } from 'date-fns';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction ListPayments() {\n  _s();\n\n  const [rows, setRows] = useState([]);\n\n  const handleCancelClick = cellValues => {\n    const id = cellValues.row._id;\n    const inputs = {\n      status: 'canceled'\n    };\n    cancelPayment(inputs, id).then(data => {});\n  };\n\n  const columns = agencyListPaymentEngColumns(handleCancelClick);\n  useEffect(() => {\n    getPayments().then(data => {\n      if (data.error) {\n        console.log(data.error.message);\n      } else if (data.success) {\n        data.success.payment.map((item, idx) => {\n          var _item$client, _item$client2;\n\n          item.id = idx + 1;\n          item.property = (_item$client = item.client) === null || _item$client === void 0 ? void 0 : _item$client.property;\n          item.email = (_item$client2 = item.client) === null || _item$client2 === void 0 ? void 0 : _item$client2.email;\n          const date = item.createdAt ? new Date(item.createdAt) : new Date();\n          item.createdAt = format(date, \"dd-MM-yyyy kk:mm\");\n        });\n        setRows(data.success.payment);\n      } else {\n        console.log('External Error!');\n      }\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(DataTable, {\n    rows: rows,\n    columns: columns\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 9\n  }, this);\n}\n\n_s(ListPayments, \"aEmP4ME4qF+uYWoxBpsZBPdGgb8=\");\n\n_c = ListPayments;\n;\nexport default ListPayments;\n\nvar _c;\n\n$RefreshReg$(_c, \"ListPayments\");","map":{"version":3,"sources":["/home/cisco/airport-shuttle-v2/airportShuttleV2/client/src/pages/Agency/Payments/ListPayments/ListPayments.tsx"],"names":["useEffect","useState","DataTable","agencyListPaymentEngColumns","getPayments","cancelPayment","format","ListPayments","rows","setRows","handleCancelClick","cellValues","id","row","_id","inputs","status","then","data","columns","error","console","log","message","success","payment","map","item","idx","property","client","email","date","createdAt","Date"],"mappings":";;;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,OAAOC,SAAP,MAAsB,4CAAtB;AACA,SAASC,2BAAT,QAA4C,8BAA5C;AACA,SAASC,WAAT,EAAsBC,aAAtB,QAA2C,4CAA3C;AACA,SAASC,MAAT,QAAuB,UAAvB;;;AAGA,SAASC,YAAT,GAAqC;AAAA;;AACjC,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBR,QAAQ,CAAM,EAAN,CAAhC;;AAEA,QAAMS,iBAAiB,GAAIC,UAAD,IAAqB;AAC3C,UAAMC,EAAE,GAAGD,UAAU,CAACE,GAAX,CAAeC,GAA1B;AACA,UAAMC,MAAM,GAAG;AAAEC,MAAAA,MAAM,EAAE;AAAV,KAAf;AACAX,IAAAA,aAAa,CAACU,MAAD,EAASH,EAAT,CAAb,CAA0BK,IAA1B,CAAgCC,IAAD,IAAU,CAExC,CAFD;AAIH,GAPD;;AAQA,QAAMC,OAAO,GAAGhB,2BAA2B,CAACO,iBAAD,CAA3C;AACAV,EAAAA,SAAS,CAAC,MAAM;AACZI,IAAAA,WAAW,GAAGa,IAAd,CAAoBC,IAAD,IAAU;AACzB,UAAIA,IAAI,CAACE,KAAT,EAAe;AACXC,QAAAA,OAAO,CAACC,GAAR,CAAYJ,IAAI,CAACE,KAAL,CAAWG,OAAvB;AACH,OAFD,MAEO,IAAIL,IAAI,CAACM,OAAT,EAAkB;AACrBN,QAAAA,IAAI,CAACM,OAAL,CAAaC,OAAb,CAAqBC,GAArB,CAAyB,CAACC,IAAD,EAAOC,GAAP,KAAe;AAAA;;AACpCD,UAAAA,IAAI,CAACf,EAAL,GAAUgB,GAAG,GAAG,CAAhB;AACAD,UAAAA,IAAI,CAACE,QAAL,mBAAgBF,IAAI,CAACG,MAArB,iDAAgB,aAAaD,QAA7B;AACAF,UAAAA,IAAI,CAACI,KAAL,oBAAaJ,IAAI,CAACG,MAAlB,kDAAa,cAAaC,KAA1B;AACA,gBAAMC,IAAI,GAAGL,IAAI,CAACM,SAAL,GAAiB,IAAIC,IAAJ,CAASP,IAAI,CAACM,SAAd,CAAjB,GAA2C,IAAIC,IAAJ,EAAxD;AACAP,UAAAA,IAAI,CAACM,SAAL,GAAiB3B,MAAM,CAAC0B,IAAD,EAAO,kBAAP,CAAvB;AACH,SAND;AAOAvB,QAAAA,OAAO,CAACS,IAAI,CAACM,OAAL,CAAaC,OAAd,CAAP;AACH,OATM,MASA;AACHJ,QAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACH;AACJ,KAfD;AAgBC,GAjBI,EAiBF,EAjBE,CAAT;AAkBA,sBACI,QAAC,SAAD;AAAW,IAAA,IAAI,EAAEd,IAAjB;AAAuB,IAAA,OAAO,EAAEW;AAAhC;AAAA;AAAA;AAAA;AAAA,UADJ;AAGH;;GAjCQZ,Y;;KAAAA,Y;AAiCR;AAED,eAAeA,YAAf","sourcesContent":["import { useEffect, useState } from \"react\";\nimport DataTable from \"../../../../components/DataTable/DataTable\";\nimport { agencyListPaymentEngColumns } from '../../../../utils/dictionary';\nimport { getPayments, cancelPayment } from '../../../../helpers/APICalls/agencyPayment';\nimport { format } from 'date-fns';\n\n\nfunction ListPayments(): JSX.Element {\n    const [rows, setRows] = useState<any>([]);\n\n    const handleCancelClick = (cellValues: any) => {\n        const id = cellValues.row._id;\n        const inputs = { status: 'canceled' };\n        cancelPayment(inputs, id).then((data) => {\n\n        })\n\n    }\n    const columns = agencyListPaymentEngColumns(handleCancelClick);\n    useEffect(() => {\n        getPayments().then((data) => {\n            if (data.error){\n                console.log(data.error.message)\n            } else if (data.success) {\n                data.success.payment.map((item, idx) => {\n                    item.id = idx + 1;\n                    item.property = item.client?.property;\n                    item.email = item.client?.email;\n                    const date = item.createdAt ? new Date(item.createdAt): new Date();\n                    item.createdAt = format(date, \"dd-MM-yyyy kk:mm\")\n                })\n                setRows(data.success.payment);\n            } else {\n                console.log('External Error!');\n            }\n        });\n        }, [])\n    return (\n        <DataTable rows={rows} columns={columns} />\n    )\n};\n\nexport default ListPayments;"]},"metadata":{},"sourceType":"module"}