{"ast":null,"code":"import _slicedToArray from\"/home/cisco/airportShuttleDeploy/airportShuttleV2/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from'react';import useStyles from'./useStyles';import{format}from'date-fns';import{Card,CardMedia,CardContent,Typography,Grid}from'@material-ui/core';import{useLanguage}from'../../../context/useLanguageContext';import{useHistory}from'react-router-dom';import{getStat,getstatInfo}from'../../../helpers/APICalls/agencyReservation';import{useSnackBar}from'../../../context/useSnackbarContext';import DataTable from'../../../components/DataTable/DataTable';import{engUnconfirmedResColumns,turkishUnconfirmedResColumns,engOwedUsersColumns,turkishOwedUsersColumns}from'../../../utils/dictionary/home';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var initStat={owedUsersNumber:0,unconfirmedReservationsNumber:0};var initStatInfo={owedUsers:[],unconfirmedReservations:[]};var AgencyHome=function AgencyHome(){var _useStyles=useStyles(),root=_useStyles.root,card=_useStyles.card,itemContaienr=_useStyles.itemContaienr;var _useLanguage=useLanguage(),language=_useLanguage.language;var _useState=useState(initStat),_useState2=_slicedToArray(_useState,2),stat=_useState2[0],setStat=_useState2[1];var _useState3=useState(initStatInfo),_useState4=_slicedToArray(_useState3,2),statInfo=_useState4[0],setStatInfo=_useState4[1];var _useSnackBar=useSnackBar(),updateSnackBarMessage=_useSnackBar.updateSnackBarMessage;var history=useHistory();var unconfirmedResColumns=language==='eng'?engUnconfirmedResColumns():turkishUnconfirmedResColumns();var owedUsersColumns=language==='eng'?engOwedUsersColumns():turkishOwedUsersColumns();useEffect(function(){getStat().then(function(data){if(data.error){console.log(data.error);updateSnackBarMessage(data.error);}else if(data.success){setStat(data.success);}else{updateSnackBarMessage('An unexpected error occurred. Please try again !');}});},[]);useEffect(function(){getstatInfo().then(function(data){if(data.error){console.log(data.error);updateSnackBarMessage(data.error);}else if(data.success){console.log(data.success);data.success.unconfirmedReservations.map(function(reservation,idx){reservation.id=idx+1;reservation.property=reservation.client.propertyName;var date=new Date(reservation.selectedDate);reservation.date=format(date,'dd-MM-yyyy kk:hh');});data.success.owedUsers.map(function(user,idx){user.id=idx+1;});setStatInfo(data.success);}else{updateSnackBarMessage('An unexpected error occurred. Please try again !');}});},[stat]);var cards=[{cardImg:'https://airportshuttle0.s3.amazonaws.com/airport-shuttle02.jpeg',title:language==='eng'?'Unconfirmed Reservations':'Onaylanmamış Rezer...',content:language==='eng'?'Reservations waiting for confirmation!':'Onay bekleyen rezervasyonlar!',number:stat.unconfirmedReservationsNumber,btnText:'Show',handleClick:function handleClick(){history.push('/unconfirmed-reservations');}},{cardImg:'https://airportshuttle0.s3.amazonaws.com/money.jpeg',title:language==='eng'?'Debt':'Borç',content:language==='eng'?'clients owe you money!':'Müşterilerin sana borcu var!',number:stat.owedUsersNumber,btnText:'Show',handleClick:function handleClick(){history.push('/debt');}}];return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Grid,{container:true,direction:\"column\",className:root,children:[/*#__PURE__*/_jsx(Grid,{item:true,container:true,spacing:3,justifyContent:\"space-evenly\",className:itemContaienr,children:cards.map(function(_ref){var cardImg=_ref.cardImg,title=_ref.title,content=_ref.content,number=_ref.number,btnText=_ref.btnText,handleClick=_ref.handleClick;return/*#__PURE__*/_jsxs(Card,{className:card,children:[/*#__PURE__*/_jsx(CardMedia,{component:\"img\",height:\"140\",image:cardImg,alt:\"Debt\"}),/*#__PURE__*/_jsxs(CardContent,{style:{backgroundColor:'#2F4F4F'},children:[/*#__PURE__*/_jsx(Typography,{gutterBottom:true,variant:\"h5\",component:\"div\",children:title}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"\".concat(number,\" \").concat(content)})]})]});})}),/*#__PURE__*/_jsxs(Grid,{item:true,container:true,justifyContent:\"flex-end\",alignItems:\"center\",children:[/*#__PURE__*/_jsx(DataTable,{rows:statInfo.unconfirmedReservations,columns:unconfirmedResColumns}),/*#__PURE__*/_jsx(DataTable,{rows:statInfo.owedUsers,columns:owedUsersColumns})]})]})});};export default AgencyHome;","map":{"version":3,"sources":["/home/cisco/airportShuttleDeploy/airportShuttleV2/client/src/pages/Home/AgencyHome/AgencyHome.tsx"],"names":["useEffect","useState","useStyles","format","Card","CardMedia","CardContent","Typography","Grid","useLanguage","useHistory","getStat","getstatInfo","useSnackBar","DataTable","engUnconfirmedResColumns","turkishUnconfirmedResColumns","engOwedUsersColumns","turkishOwedUsersColumns","initStat","owedUsersNumber","unconfirmedReservationsNumber","initStatInfo","owedUsers","unconfirmedReservations","AgencyHome","root","card","itemContaienr","language","stat","setStat","statInfo","setStatInfo","updateSnackBarMessage","history","unconfirmedResColumns","owedUsersColumns","then","data","error","console","log","success","map","reservation","idx","id","property","client","propertyName","date","Date","selectedDate","user","cards","cardImg","title","content","number","btnText","handleClick","push","backgroundColor"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react';\nimport useStyles from './useStyles';\nimport { format } from 'date-fns';\nimport { Card, CardMedia, CardContent, Typography, CardActions, Button, Grid } from '@material-ui/core';\nimport { useLanguage } from '../../../context/useLanguageContext';\nimport { useHistory } from 'react-router-dom';\nimport { getStat, getstatInfo } from '../../../helpers/APICalls/agencyReservation';\nimport { useSnackBar } from '../../../context/useSnackbarContext';\nimport DataTable from '../../../components/DataTable/DataTable';\nimport { GetStatApiDataSuccess, GetStatInfoApiDataSuccess } from '../../../interface/agencyReservation';\nimport { engUnconfirmedResColumns, \n          turkishUnconfirmedResColumns,\n          engOwedUsersColumns,\n          turkishOwedUsersColumns } from '../../../utils/dictionary/home';\n\nconst initStat = {\n    owedUsersNumber: 0,\n    unconfirmedReservationsNumber: 0\n};\n\nconst initStatInfo = {\n    owedUsers: [],\n    unconfirmedReservations: []\n};\n\nconst AgencyHome = (): JSX.Element => {\n    const { root, card, itemContaienr } = useStyles();\n    const { language } = useLanguage();\n    const [stat, setStat] = useState<GetStatApiDataSuccess>(initStat);\n    const [statInfo, setStatInfo] = useState<any>(initStatInfo);\n    const { updateSnackBarMessage } = useSnackBar();\n    const history = useHistory()\n    \n    const unconfirmedResColumns = language === 'eng' ? engUnconfirmedResColumns() : turkishUnconfirmedResColumns();\n    const owedUsersColumns = language === 'eng' ? engOwedUsersColumns() : turkishOwedUsersColumns();\n \n    useEffect(() => {\n        getStat().then((data) => {\n            if (data.error) {\n                console.log(data.error);\n                updateSnackBarMessage(data.error);\n            } else if (data.success) {\n                setStat(data.success);\n            } else {\n                updateSnackBarMessage('An unexpected error occurred. Please try again !');\n            }\n        });\n    }, []);\n\n    useEffect(() => {\n        getstatInfo().then((data) => {\n            if (data.error) {\n                console.log(data.error);\n                updateSnackBarMessage(data.error);\n            } else if (data.success) {\n                console.log(data.success)\n                data.success.unconfirmedReservations.map((reservation, idx) => {\n                    reservation.id = idx + 1;\n                    reservation.property = reservation.client.propertyName;\n                    const date = new Date(reservation.selectedDate);\n                    reservation.date = format(date, 'dd-MM-yyyy kk:hh')\n                    \n                })\n                data.success.owedUsers.map((user, idx) => {\n                    user.id = idx + 1;\n                })\n                setStatInfo(data.success);\n            } else {\n                updateSnackBarMessage('An unexpected error occurred. Please try again !');\n            }\n        });\n    }, [stat]);\n\n    const cards = [\n            {\n                cardImg: 'https://airportshuttle0.s3.amazonaws.com/airport-shuttle02.jpeg',\n                title: language === 'eng' ? 'Unconfirmed Reservations' : 'Onaylanmamış Rezer...',\n                content: language === 'eng' ? 'Reservations waiting for confirmation!' : 'Onay bekleyen rezervasyonlar!',\n                number: stat.unconfirmedReservationsNumber,\n                btnText: 'Show',\n                handleClick: () => {history.push('/unconfirmed-reservations')}\n            }, {\n                cardImg: 'https://airportshuttle0.s3.amazonaws.com/money.jpeg',\n                title: language === 'eng' ? 'Debt' : 'Borç',\n                content: language === 'eng' ? 'clients owe you money!' : 'Müşterilerin sana borcu var!',\n                number: stat.owedUsersNumber,\n                btnText: 'Show',\n                handleClick: () => {history.push('/debt')}\n            }\n        ]\n    return (\n    <>\n        <Grid container direction=\"column\" className={root}>\n            <Grid item container spacing={3} justifyContent=\"space-evenly\" className={itemContaienr}>\n                {cards.map(({ cardImg, title, content, number, btnText, handleClick }) => (\n                <Card className={card}>\n                    <CardMedia\n                        component=\"img\"\n                        height=\"140\"\n                        image={cardImg}\n                        alt=\"Debt\"\n                    />\n                    <CardContent style={{ backgroundColor:'#2F4F4F' }}>\n                        <Typography gutterBottom variant=\"h5\" component=\"div\">\n                            {title}\n                        </Typography>\n                        <Typography variant=\"body2\">\n                            {`${number} ${content}`}\n                        </Typography>\n                    </CardContent>\n                </Card>\n                ))}\n            </Grid>\n            <Grid item container justifyContent='flex-end'  alignItems='center'>\n                <DataTable rows={statInfo.unconfirmedReservations} columns={unconfirmedResColumns} />\n                <DataTable rows={statInfo.owedUsers} columns={owedUsersColumns} />\n            </Grid>\n        </Grid>\n    </>\n    );\n};\n\nexport default AgencyHome;"]},"metadata":{},"sourceType":"module"}