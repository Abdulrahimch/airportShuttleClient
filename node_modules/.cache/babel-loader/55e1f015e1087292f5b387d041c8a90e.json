{"ast":null,"code":"var _jsxFileName = \"/home/cisco/airport-shuttle-v2/airportShuttleV2/client/src/pages/Agency/Payments/ListPayments/ListPayments.tsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport DataTable from \"../../../../components/DataTable/DataTable\";\nimport { agencyListPaymentEngColumns } from '../../../../utils/dictionary';\nimport { getPayments, updatePayment } from '../../../../helpers/APICalls/agencyPayment';\nimport { format } from 'date-fns';\nimport { useSnackBar } from '../../../../context/useSnackbarContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction ListPayments() {\n  _s();\n\n  const [rows, setRows] = useState([]);\n  const {\n    updateSnackBarMessage\n  } = useSnackBar();\n\n  const handleCancelClick = cellValues => {\n    const paymentId = cellValues.row._id;\n    const clientId = cellValues.row.client._id;\n    const inputs = {\n      status: 'canceled',\n      clientId\n    };\n    updatePayment(inputs, paymentId).then(data => {\n      if (data.error) {\n        updateSnackBarMessage(data.error.message);\n      } else if (data.success) {\n        updateSnackBarMessage('Payment has been canceled successfully');\n      } else {\n        updateSnackBarMessage('An unexpected error occurred. Please try again !');\n      }\n    });\n  };\n\n  const columns = agencyListPaymentEngColumns(handleCancelClick);\n  useEffect(() => {\n    getPayments().then(data => {\n      if (data.error) {\n        console.log(data.error.message);\n      } else if (data.success) {\n        data.success.payment.map((item, idx) => {\n          var _item$client, _item$client2;\n\n          item.id = idx + 1;\n          item.property = (_item$client = item.client) === null || _item$client === void 0 ? void 0 : _item$client.property;\n          item.email = (_item$client2 = item.client) === null || _item$client2 === void 0 ? void 0 : _item$client2.email;\n          const date = item.createdAt ? new Date(item.createdAt) : new Date();\n          item.createdAt = format(date, \"dd-MM-yyyy kk:mm\");\n        });\n        setRows(data.success.payment);\n      } else {\n        console.log('External Error!');\n      }\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(DataTable, {\n    rows: rows,\n    columns: columns\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 9\n  }, this);\n}\n\n_s(ListPayments, \"RmCfIVQv3lbcOfv8DmJSM0bDoiE=\", false, function () {\n  return [useSnackBar];\n});\n\n_c = ListPayments;\n;\nexport default ListPayments;\n\nvar _c;\n\n$RefreshReg$(_c, \"ListPayments\");","map":{"version":3,"sources":["/home/cisco/airport-shuttle-v2/airportShuttleV2/client/src/pages/Agency/Payments/ListPayments/ListPayments.tsx"],"names":["useEffect","useState","DataTable","agencyListPaymentEngColumns","getPayments","updatePayment","format","useSnackBar","ListPayments","rows","setRows","updateSnackBarMessage","handleCancelClick","cellValues","paymentId","row","_id","clientId","client","inputs","status","then","data","error","message","success","columns","console","log","payment","map","item","idx","id","property","email","date","createdAt","Date"],"mappings":";;;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,OAAOC,SAAP,MAAsB,4CAAtB;AACA,SAASC,2BAAT,QAA4C,8BAA5C;AACA,SAASC,WAAT,EAAsBC,aAAtB,QAA2C,4CAA3C;AACA,SAASC,MAAT,QAAuB,UAAvB;AACA,SAASC,WAAT,QAA4B,wCAA5B;;;AAEA,SAASC,YAAT,GAAqC;AAAA;;AACjC,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBT,QAAQ,CAAM,EAAN,CAAhC;AACA,QAAM;AAAEU,IAAAA;AAAF,MAA4BJ,WAAW,EAA7C;;AAEA,QAAMK,iBAAiB,GAAIC,UAAD,IAAqB;AAC3C,UAAMC,SAAS,GAAGD,UAAU,CAACE,GAAX,CAAeC,GAAjC;AACA,UAAMC,QAAQ,GAAGJ,UAAU,CAACE,GAAX,CAAeG,MAAf,CAAsBF,GAAvC;AACA,UAAMG,MAAM,GAAG;AAAEC,MAAAA,MAAM,EAAE,UAAV;AAAsBH,MAAAA;AAAtB,KAAf;AACAZ,IAAAA,aAAa,CAACc,MAAD,EAASL,SAAT,CAAb,CAAiCO,IAAjC,CAAuCC,IAAD,IAAU;AAC5C,UAAIA,IAAI,CAACC,KAAT,EAAgB;AACZZ,QAAAA,qBAAqB,CAACW,IAAI,CAACC,KAAL,CAAWC,OAAZ,CAArB;AACH,OAFD,MAEO,IAAIF,IAAI,CAACG,OAAT,EAAkB;AACrBd,QAAAA,qBAAqB,CAAC,wCAAD,CAArB;AAEH,OAHM,MAGA;AACHA,QAAAA,qBAAqB,CAAC,kDAAD,CAArB;AACH;AACJ,KATD;AAUH,GAdD;;AAeA,QAAMe,OAAO,GAAGvB,2BAA2B,CAACS,iBAAD,CAA3C;AACAZ,EAAAA,SAAS,CAAC,MAAM;AACZI,IAAAA,WAAW,GAAGiB,IAAd,CAAoBC,IAAD,IAAU;AACzB,UAAIA,IAAI,CAACC,KAAT,EAAe;AACXI,QAAAA,OAAO,CAACC,GAAR,CAAYN,IAAI,CAACC,KAAL,CAAWC,OAAvB;AACH,OAFD,MAEO,IAAIF,IAAI,CAACG,OAAT,EAAkB;AACrBH,QAAAA,IAAI,CAACG,OAAL,CAAaI,OAAb,CAAqBC,GAArB,CAAyB,CAACC,IAAD,EAAOC,GAAP,KAAe;AAAA;;AACpCD,UAAAA,IAAI,CAACE,EAAL,GAAUD,GAAG,GAAG,CAAhB;AACAD,UAAAA,IAAI,CAACG,QAAL,mBAAgBH,IAAI,CAACb,MAArB,iDAAgB,aAAagB,QAA7B;AACAH,UAAAA,IAAI,CAACI,KAAL,oBAAaJ,IAAI,CAACb,MAAlB,kDAAa,cAAaiB,KAA1B;AACA,gBAAMC,IAAI,GAAGL,IAAI,CAACM,SAAL,GAAiB,IAAIC,IAAJ,CAASP,IAAI,CAACM,SAAd,CAAjB,GAA2C,IAAIC,IAAJ,EAAxD;AACAP,UAAAA,IAAI,CAACM,SAAL,GAAiB/B,MAAM,CAAC8B,IAAD,EAAO,kBAAP,CAAvB;AACH,SAND;AAOA1B,QAAAA,OAAO,CAACY,IAAI,CAACG,OAAL,CAAaI,OAAd,CAAP;AACH,OATM,MASA;AACHF,QAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACH;AACJ,KAfD;AAgBC,GAjBI,EAiBF,EAjBE,CAAT;AAkBA,sBACI,QAAC,SAAD;AAAW,IAAA,IAAI,EAAEnB,IAAjB;AAAuB,IAAA,OAAO,EAAEiB;AAAhC;AAAA;AAAA;AAAA;AAAA,UADJ;AAGH;;GAzCQlB,Y;UAE6BD,W;;;KAF7BC,Y;AAyCR;AAED,eAAeA,YAAf","sourcesContent":["import { useEffect, useState } from \"react\";\nimport DataTable from \"../../../../components/DataTable/DataTable\";\nimport { agencyListPaymentEngColumns } from '../../../../utils/dictionary';\nimport { getPayments, updatePayment } from '../../../../helpers/APICalls/agencyPayment';\nimport { format } from 'date-fns';\nimport { useSnackBar } from '../../../../context/useSnackbarContext';\n\nfunction ListPayments(): JSX.Element {\n    const [rows, setRows] = useState<any>([]);\n    const { updateSnackBarMessage } = useSnackBar();\n\n    const handleCancelClick = (cellValues: any) => {\n        const paymentId = cellValues.row._id;\n        const clientId = cellValues.row.client._id;\n        const inputs = { status: 'canceled', clientId };\n        updatePayment(inputs, paymentId).then((data) => {\n            if (data.error) {\n                updateSnackBarMessage(data.error.message)\n            } else if (data.success) {\n                updateSnackBarMessage('Payment has been canceled successfully');\n\n            } else {\n                updateSnackBarMessage('An unexpected error occurred. Please try again !');\n            }\n        })\n    }\n    const columns = agencyListPaymentEngColumns(handleCancelClick);\n    useEffect(() => {\n        getPayments().then((data) => {\n            if (data.error){\n                console.log(data.error.message)\n            } else if (data.success) {\n                data.success.payment.map((item, idx) => {\n                    item.id = idx + 1;\n                    item.property = item.client?.property;\n                    item.email = item.client?.email;\n                    const date = item.createdAt ? new Date(item.createdAt): new Date();\n                    item.createdAt = format(date, \"dd-MM-yyyy kk:mm\")\n                })\n                setRows(data.success.payment);\n            } else {\n                console.log('External Error!');\n            }\n        });\n        }, [])\n    return (\n        <DataTable rows={rows} columns={columns} />\n    )\n};\n\nexport default ListPayments;"]},"metadata":{},"sourceType":"module"}