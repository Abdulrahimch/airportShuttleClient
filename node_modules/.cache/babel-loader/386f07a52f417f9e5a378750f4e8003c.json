{"ast":null,"code":"import _slicedToArray from\"/home/cisco/airportShuttleDeploy/airportShuttleV2/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Grid,List,Typography,ListItem,ListItemAvatar,Avatar,ListItemText,Divider}from'@material-ui/core';import{useEffect,useState}from'react';import{getDrivers}from'../../../../helpers/APICalls/driver';import useStyles from'./useStyles';import{useSnackBar}from'../../../../context/useSnackbarContext';import clsx from'clsx';import CustomButton from'../../../../components/Button/CustomButton';import{updateReservation}from'../../../../helpers/APICalls/agencyReservation';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var AssignDriver=function AssignDriver(_ref){var reservation=_ref.reservation,invokeUseEffect=_ref.invokeUseEffect,handleClose=_ref.handleClose;var _useStyles=useStyles(),root=_useStyles.root,listItem=_useStyles.listItem;var selected=clsx(listItem,'selected');var _useState=useState(),_useState2=_slicedToArray(_useState,2),value=_useState2[0],setValue=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),drivers=_useState4[0],setDrivers=_useState4[1];var _useSnackBar=useSnackBar(),updateSnackBarMessage=_useSnackBar.updateSnackBarMessage;useEffect(function(){getDrivers().then(function(data){if(data.error){updateSnackBarMessage(data.error);}else if(data.success){setDrivers(data.success.drivers);}else{updateSnackBarMessage('An unexpected error occurred. Please try again !');}});return function(){setDrivers([]);};},[]);var handleSubmit=function handleSubmit(){if(value===undefined){updateSnackBarMessage('Please select a driver');return;};var id=reservation._id;var inputs={confirmed:true,driver:value};updateReservation(inputs,id).then(function(data){if(data.error){updateSnackBarMessage(data.error);}else if(data.success){updateSnackBarMessage('reservation has been confirmed successfully!');invokeUseEffect();}else{updateSnackBarMessage('An unexpected error occurred. Please try again !');}});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Grid,{container:true,direction:\"column\",className:root,children:[/*#__PURE__*/_jsxs(Grid,{item:true,children:[/*#__PURE__*/_jsx(Typography,{children:\"Please Select Driver\"}),/*#__PURE__*/_jsx(List,{style:{width:'100%',maxWidth:360,backgroundColor:'background.paper'},children:drivers.map(function(driver,idx){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(ListItem,{alignItems:\"flex-start\",className:value!==driver._id?listItem:selected,onClick:function onClick(){setValue(driver._id);},children:[/*#__PURE__*/_jsx(ListItemAvatar,{children:/*#__PURE__*/_jsx(Avatar,{alt:\"\".concat(driver.name),src:\"https://airportshuttle0.s3.amazonaws.com/defaultAvatar.png\"})}),/*#__PURE__*/_jsx(ListItemText,{primary:\"\".concat(driver.name),secondary:/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Typography,{style:{display:'inline'},component:\"span\",variant:\"body2\",children:[\"Car N0: \".concat(driver.carNumber),\" \",/*#__PURE__*/_jsx(\"br\",{}),\" \",\"Cep: \".concat(driver.phoneNumber)]})})})]}),/*#__PURE__*/_jsx(Divider,{variant:\"inset\",component:\"li\"})]});})})]}),/*#__PURE__*/_jsxs(Grid,{item:true,container:true,justifyContent:\"space-evenly\",style:{marginTop:'2em'},children:[/*#__PURE__*/_jsx(CustomButton,{btnText:\"Submit\",style:\"dialogSubmit\",onClick:handleSubmit}),/*#__PURE__*/_jsx(CustomButton,{btnText:\"Cancel\",style:\"cancel\",onClick:handleClose})]})]})});};export default AssignDriver;","map":{"version":3,"sources":["/home/cisco/airportShuttleDeploy/airportShuttleV2/client/src/pages/Agency/Drivers/AssignDriver/AssignDriver.tsx"],"names":["Grid","List","Typography","ListItem","ListItemAvatar","Avatar","ListItemText","Divider","useEffect","useState","getDrivers","useStyles","useSnackBar","clsx","CustomButton","updateReservation","AssignDriver","reservation","invokeUseEffect","handleClose","root","listItem","selected","value","setValue","drivers","setDrivers","updateSnackBarMessage","then","data","error","success","handleSubmit","undefined","id","_id","inputs","confirmed","driver","width","maxWidth","backgroundColor","map","idx","name","display","carNumber","phoneNumber","marginTop"],"mappings":"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","sourcesContent":["import { Grid, List, Typography, ListItem, ListItemAvatar, Avatar, ListItemText, Divider, Select } from '@material-ui/core';\nimport { useEffect, useState } from 'react';\nimport { getDrivers } from '../../../../helpers/APICalls/driver';\nimport useStyles from './useStyles';\nimport { useSnackBar } from '../../../../context/useSnackbarContext';  \nimport { Driver } from '../../../../interface/Driver';\nimport clsx from 'clsx';\nimport CustomButton from '../../../../components/Button/CustomButton';\nimport { updateReservation } from '../../../../helpers/APICalls/agencyReservation';\nimport { Reservation } from '../../../../interface/agencyReservation';\n\ninterface Props {\n    reservation: any;\n    invokeUseEffect: () => void;\n    handleClose: () => void;\n}\n\nconst AssignDriver = ({ reservation, invokeUseEffect, handleClose }: Props): JSX.Element => {\n    const { root, listItem } = useStyles();\n    const selected = clsx(listItem, 'selected');\n\n    const [value, setValue] = useState<string | undefined>();\n    const [drivers, setDrivers] = useState<Driver []>([]);\n\n    const { updateSnackBarMessage } = useSnackBar();\n\n    useEffect(() => {\n        getDrivers().then((data) => {\n            if (data.error) {\n                updateSnackBarMessage(data.error);\n            } else if (data.success){\n                setDrivers(data.success.drivers);\n            } else {\n                updateSnackBarMessage('An unexpected error occurred. Please try again !');\n            }\n        });\n        return () => {\n            setDrivers([]);\n        }\n    }, []);\n\n    const handleSubmit = () => {\n        if (value === undefined) {\n            updateSnackBarMessage('Please select a driver');\n            return\n        };\n        const id = reservation._id;\n        const inputs = { confirmed: true, driver: value };\n        updateReservation(inputs, id).then((data) => {\n            if (data.error) {\n                updateSnackBarMessage(data.error);\n            } else if (data.success) {\n                updateSnackBarMessage('reservation has been confirmed successfully!');\n                invokeUseEffect();\n                \n            } else {\n                updateSnackBarMessage('An unexpected error occurred. Please try again !');\n            }\n        });\n    }\n\n    return (\n        <>\n            <Grid container direction=\"column\" className={root} >\n                <Grid item>\n                    <Typography>\n                        Please Select Driver\n                    </Typography>\n                        <List style={{ width: '100%', maxWidth: 360, backgroundColor: 'background.paper' }}>\n                            {drivers.map((driver, idx) => (\n                                <>\n                                    <ListItem alignItems=\"flex-start\" className={value !== driver._id ? listItem : selected} onClick={() => {setValue(driver._id)}}>\n                                        <ListItemAvatar>\n                                            <Avatar alt={`${driver.name}`} src=\"https://airportshuttle0.s3.amazonaws.com/defaultAvatar.png\" />\n                                        </ListItemAvatar>\n                                        <ListItemText\n                                            primary={`${driver.name}`}\n                                            secondary={\n                                                <>\n                                                <Typography\n                                                    style={{ display: 'inline' }}\n                                                    component=\"span\"\n                                                    variant=\"body2\"\n                                                >\n                                                    {`Car N0: ${driver.carNumber}`} <br /> {`Cep: ${driver.phoneNumber}`}\n                                                </Typography>\n                                                \n                                                </>\n                                            }\n                                        />\n                                    </ListItem>\n                                    <Divider variant=\"inset\" component=\"li\" />\n                                </>\n                            ))}\n                        </List>\n                </Grid>\n                <Grid item container justifyContent='space-evenly' style={{ marginTop: '2em' }}>\n                    <CustomButton btnText=\"Submit\" style='dialogSubmit' onClick={handleSubmit} />\n                    <CustomButton btnText=\"Cancel\" style='cancel' onClick={handleClose} />\n                </Grid>\n            </Grid>\n        </>\n    );\n};\n\nexport default AssignDriver;"]},"metadata":{},"sourceType":"module"}