{"ast":null,"code":"import _slicedToArray from\"/home/cisco/airportShuttleDeploy/airportShuttleV2/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from'react';import DataTable from'../../../components/DataTable/DataTable';import{useLanguage}from'../../../context/useLanguageContext';import CustomDialog from'../../../components/CustomDialog/CustomDialog';import AddPayment from'./AddPayment/AddPayment';import{getClients}from'../../../helpers/APICalls/user';import CloseIcon from'@material-ui/icons/Close';import{agencyPaymentEngColumns,agencyPaymentTurkishColumns}from'../../../utils/dictionary';import ListPayments from'./ListPayments/ListPayments';import Details from'./Details/Details';import{IconButton,AppBar,Toolbar,Typography}from'@material-ui/core';import{useHistory}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function AgencyPayments(){var _useLanguage=useLanguage(),language=_useLanguage.language;var history=useHistory();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),openAddPayment=_useState2[0],setOpenAddPayment=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),openAllPayments=_useState4[0],setOpenAllPayments=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),details=_useState6[0],setDetails=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),rows=_useState8[0],setRows=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),clientId=_useState10[0],setClientId=_useState10[1];var _useState11=useState(0),_useState12=_slicedToArray(_useState11,2),debt=_useState12[0],setDebt=_useState12[1];var handleAddPaymentClick=function handleAddPaymentClick(cellValues){setClientId(cellValues.row._id);setOpenAddPayment(true);};var handleAddPaymentClose=function handleAddPaymentClose(){setOpenAddPayment(false);};var handleAllPaymentsClick=function handleAllPaymentsClick(cellValues){setClientId(cellValues.row._id);setOpenAllPayments(true);};var handleAllPaymentsClose=function handleAllPaymentsClose(){setOpenAllPayments(false);};var handleDetailsClick=function handleDetailsClick(cellValues){setDebt(cellValues.row.debt);setClientId(cellValues.row._id);setDetails(true);};var handleDetailsClose=function handleDetailsClose(){setDetails(false);};var columns=language==='eng'?agencyPaymentEngColumns(handleAddPaymentClick,handleAllPaymentsClick,handleDetailsClick):agencyPaymentTurkishColumns(handleAddPaymentClick,handleAllPaymentsClick,handleDetailsClick);useEffect(function(){getClients().then(function(data){if(data.error){console.log('data error');}else if(data.success){data.success.clients.map(function(client,idx){client.id=idx+1;client.status='client';});setRows(data.success.clients);}else{console.log('external error');}});return function(){setRows([]);};},[history,openAllPayments,openAddPayment]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(DataTable,{rows:rows,columns:columns}),/*#__PURE__*/_jsx(CustomDialog,{open:openAddPayment,onClose:handleAddPaymentClose,style:'addPayment',children:/*#__PURE__*/_jsx(AddPayment,{clientId:clientId})}),/*#__PURE__*/_jsxs(CustomDialog,{open:openAllPayments,onClose:handleAllPaymentsClose,style:'addPayment',isFullScreen:true,children:[/*#__PURE__*/_jsx(AppBar,{position:\"static\",children:/*#__PURE__*/_jsxs(Toolbar,{children:[/*#__PURE__*/_jsx(IconButton,{edge:\"start\",color:\"inherit\",onClick:handleAllPaymentsClose,\"aria-label\":\"close\",children:/*#__PURE__*/_jsx(CloseIcon,{})}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",component:\"div\",children:\"All Payments\"})]})}),/*#__PURE__*/_jsx(ListPayments,{clientId:clientId})]}),/*#__PURE__*/_jsxs(CustomDialog,{open:details,onClose:handleDetailsClose,style:'addPayment',isFullScreen:true,children:[/*#__PURE__*/_jsx(AppBar,{position:\"static\",children:/*#__PURE__*/_jsxs(Toolbar,{children:[/*#__PURE__*/_jsx(IconButton,{edge:\"start\",color:\"inherit\",onClick:handleDetailsClose,\"aria-label\":\"close\",children:/*#__PURE__*/_jsx(CloseIcon,{})}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",component:\"div\",children:\"Reservations and Payments details\"})]})}),/*#__PURE__*/_jsx(Details,{clientId:clientId,debt:debt})]})]});}export default AgencyPayments;","map":{"version":3,"sources":["/home/cisco/airportShuttleDeploy/airportShuttleV2/client/src/pages/Agency/Payments/AgencyPayments.tsx"],"names":["useEffect","useState","DataTable","useLanguage","CustomDialog","AddPayment","getClients","CloseIcon","agencyPaymentEngColumns","agencyPaymentTurkishColumns","ListPayments","Details","IconButton","AppBar","Toolbar","Typography","useHistory","AgencyPayments","language","history","openAddPayment","setOpenAddPayment","openAllPayments","setOpenAllPayments","details","setDetails","rows","setRows","clientId","setClientId","debt","setDebt","handleAddPaymentClick","cellValues","row","_id","handleAddPaymentClose","handleAllPaymentsClick","handleAllPaymentsClose","handleDetailsClick","handleDetailsClose","columns","then","data","error","console","log","success","clients","map","client","idx","id","status"],"mappings":"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","sourcesContent":["import { useEffect, useState } from 'react';\nimport DataTable from '../../../components/DataTable/DataTable';\nimport { useLanguage } from '../../../context/useLanguageContext';\nimport CustomDialog from '../../../components/CustomDialog/CustomDialog';\nimport AddPayment from './AddPayment/AddPayment';\nimport { getClients } from '../../../helpers/APICalls/user';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { agencyPaymentEngColumns, agencyPaymentTurkishColumns } from '../../../utils/dictionary';\nimport ListPayments from './ListPayments/ListPayments';\nimport Details from './Details/Details';\nimport { IconButton, AppBar, Toolbar, Typography } from '@material-ui/core';\nimport { useHistory } from 'react-router-dom';\n\nfunction AgencyPayments(): JSX.Element {\n    const { language } = useLanguage();\n    const history = useHistory();\n\n    const [openAddPayment, setOpenAddPayment] = useState<boolean>(false);\n    const [openAllPayments, setOpenAllPayments] = useState<boolean>(false);\n    const [details, setDetails] = useState<boolean>(false);\n\n    const [rows, setRows] = useState<any>([]);\n    const [clientId, setClientId] = useState<string>('');\n    const [debt, setDebt] = useState<number>(0)\n\n    const handleAddPaymentClick = (cellValues: any) => {\n        setClientId(cellValues.row._id)\n        setOpenAddPayment(true)\n    };\n\n    const handleAddPaymentClose = () => {\n        setOpenAddPayment(false)\n    }\n\n    const handleAllPaymentsClick = (cellValues: any) => {\n        setClientId(cellValues.row._id);\n        setOpenAllPayments(true)\n    };\n\n    const handleAllPaymentsClose = () => {\n        setOpenAllPayments(false)\n    };\n\n    const handleDetailsClick = (cellValues: any) => {\n        setDebt(cellValues.row.debt)\n        setClientId(cellValues.row._id);\n        setDetails(true);\n    };\n\n    const handleDetailsClose = () => {\n        setDetails(false)\n    };\n\n    const columns = language === 'eng'  \n                                    ? agencyPaymentEngColumns(handleAddPaymentClick, handleAllPaymentsClick, handleDetailsClick) \n                                    : agencyPaymentTurkishColumns(handleAddPaymentClick, handleAllPaymentsClick, handleDetailsClick);\n    \n    useEffect(() => {\n        getClients().then((data) => {\n            if (data.error) {\n                console.log('data error')\n            } else if (data.success) {\n                data.success.clients.map((client, idx) => {\n                    client.id = idx + 1;\n                    client.status = 'client'\n                });\n                setRows(data.success.clients);\n            } else {\n                console.log('external error')\n            }\n        });\n        return () => {\n            setRows([])\n        };\n    }, [history, openAllPayments, openAddPayment])\n    \n    return (\n        <>\n            <DataTable rows={rows} columns={columns} />\n            <CustomDialog \n                open={openAddPayment} \n                onClose={handleAddPaymentClose}\n                style={'addPayment'}\n            >\n                <AddPayment clientId={clientId}/>\n            </CustomDialog>\n            <CustomDialog \n                open={openAllPayments} \n                onClose={handleAllPaymentsClose}\n                style={'addPayment'}\n                isFullScreen={true}\n            >\n                <AppBar position=\"static\">\n                    <Toolbar>\n                        <IconButton\n                        edge=\"start\"\n                        color=\"inherit\"\n                        onClick={handleAllPaymentsClose}\n                        aria-label=\"close\"\n                        >\n                            <CloseIcon />\n                        </IconButton>\n                        <Typography variant=\"h6\" component=\"div\">\n                            All Payments\n                        </Typography>\n                    </Toolbar>\n                </AppBar>\n                <ListPayments clientId={clientId}/>\n            </CustomDialog>\n            <CustomDialog \n                open={details} \n                onClose={handleDetailsClose}\n                style={'addPayment'}\n                isFullScreen={true}\n            >\n                <AppBar position=\"static\">\n                    <Toolbar>\n                        <IconButton\n                        edge=\"start\"\n                        color=\"inherit\"\n                        onClick={handleDetailsClose}\n                        aria-label=\"close\"\n                        >\n                            <CloseIcon />\n                        </IconButton>\n                        <Typography variant=\"h6\" component=\"div\">\n                            Reservations and Payments details\n                        </Typography>\n                    </Toolbar>\n                </AppBar>\n                <Details clientId={clientId} debt={debt}/>\n            </CustomDialog>\n        </>\n        \n    )\n}\n\nexport default AgencyPayments;"]},"metadata":{},"sourceType":"module"}